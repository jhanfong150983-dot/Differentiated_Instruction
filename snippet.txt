function displayTasks(tasks) {
    const container = document.getElementById('taskListContainer');
    if (!container) return;
    
    // 空狀態
    if (!tasks || tasks.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">�</div>
                <h3>尚未新增任務</h3>
                <p>點擊「新增任務」按鈕為此課程添加任務</p>
            </div>
        `;
        return;
    }
    
    // 清空
    container.innerHTML = '';
    
    // 生成任務列表
   tasks.forEach(function(task, index) {
       const item = document.createElement('div');
       item.className = 'task-item';
       item.dataset.taskId = task.taskId; // ✓ 新增：儲存 taskId

       // ✅ 新增：顯示任務包含哪些層級
       const hasTutorial = task.tutorialDesc || task.tutorialLink;
       const hasAdventure = task.adventureDesc || task.adventureLink;
       const hasHardcore = task.hardcoreDesc || task.hardcoreLink;

       let tierBadges = '';
       if (hasTutorial) tierBadges += '<span style="background:#10B981;color:white;padding:2px 8px;border-radius:4px;font-size:12px;margin-right:4px;">📘 基礎</span>';
       if (hasAdventure) tierBadges += '<span style="background:#F59E0B;color:white;padding:2px 8px;border-radius:4px;font-size:12px;margin-right:4px;">📙 進階</span>';
       if (hasHardcore) tierBadges += '<span style="background:#EF4444;color:white;padding:2px 8px;border-radius:4px;font-size:12px;">📕 精通</span>';

       item.innerHTML = `
           <div class="task-sequence">${index + 1}</div>
           <div class="task-info">
               <div class="task-name">${escapeHtml(task.taskName || task.name || '(無名稱)')}</div>
               <div class="task-meta">
                   ${tierBadges}
                   <br>
                    🎁 獎勵: ${task.tokenReward || 100} 代幣
                    ${task.timeLimit ? ` | ⏱️ 時限: ${task.timeLimit} 秒` : ' | ⏱️ 無時限'}
               </div>
           </div>
           <div class="task-actions">
               <button class="btn-icon" onclick="editTask('${task.taskId}')">✏️</button>
               <button class="btn-icon" onclick="deleteTask('${task.taskId}', '${escapeHtml(task.taskName || task.name || '')}')">🗑️</button>
           </div>
       `;

       container.appendChild(item);
   });
}

// ==========================================
// 新增任務
// ==========================================

/**
 * 開啟新增任務 Modal
 */

